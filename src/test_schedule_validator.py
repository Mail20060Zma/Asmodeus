import os
from schedule_validator import ScheduleValidator

def main():
    validator = ScheduleValidator()
    
    print("\nТест 1: Валидация из файла")
    current_dir = os.path.dirname(os.path.abspath(__file__))
    project_root = os.path.dirname(current_dir)
    schedule_file = os.path.join(project_root, 'data', 'schedules', 'ready', 'schedule_variant_20.csv')
    
    print(f"Проверяем файл: {schedule_file}")
    print(f"Файл существует: {os.path.exists(schedule_file)}")
    
    is_valid = validator.validate_schedule(schedule_file)
    print(f"Расписание {'валидно' if is_valid else 'невалидно'}")
    
    print("\nТест 2: Валидация из строки CSV")
    csv_string = '''
"Day","Time","Auditory","Subject","Group","Teacher","Institute"
"Wednesday","06:50","https","Философия (онлайн, УрФУ, ОК)","АТ-01","Замощанский Иван Игоревич","ОНЛАЙН"
"Tuesday","12:00","","Прикладная физическая культура Часть 2 (ИРИТ, ИНМТ, ИНФО)","АТ-02","Морозова Людмила Гарфулловна",""
"Thursday","12:00","","Прикладная физическая культура Часть 2 (ИРИТ, ИНМТ, ИНФО)","АТ-02","Морозова Людмила Гарфулловна",""
"Tuesday","08:30","Р247","Программирование 2. Комфорт (Python) АИИ и ПИИ","АТ-05","Новиков Максим Юрьевич","ИРИТ-РТФ"
"Tuesday","10:15","Р247","Программирование 2. Комфорт (Python) АИИ и ПИИ","АТ-05","Царегородцев Георгий Павлович","ИРИТ-РТФ"
"Monday","12:00","Р135","Сбор и верификация данных","АТ-01","Мартынов Дмитрий Александрович","ИРИТ-РТФ"
"Tuesday","14:15","ГУК404(II)","Дополнительные главы математики. ИРИТ-РТФ (09 УГН)","АТ-12","Лобачева Нина Анатольевна","ГУК"
"Tuesday","16:00","Р325","Дополнительные главы математики. ИРИТ-РТФ (09 УГН)","АТ-12","Лобачева Нина Анатольевна","ИРИТ-РТФ"
"Monday","10:15","СП502","Векторный анализ. ИРИТ-РТФ (09 УГН)","АТ-11","Рыжкова Наталия Геннадьевна","ИСА"
"Friday","08:30","Т216","Векторный анализ. ИРИТ-РТФ (09 УГН)","АТ-11","Рыжкова Наталия Геннадьевна","УралЭНИН"
"Friday","12:00","Ф406","Векторный анализ. ИРИТ-РТФ (09 УГН)","АТ-11","Рыжкова Наталия Геннадьевна","ФТИ"
"Monday","08:30","Р144","Иностранный язык (Смешанное, УрФУ, СМУДС) Часть 2.A0-A1","СР-44","Мартынова Татьяна Владимировна","ИРИТ-РТФ"
"Monday","20:50","https","Иностранный язык (Смешанное, УрФУ, СМУДС) Часть 2.A0-A1","СР-44","Мартынова Татьяна Владимировна","ОНЛАЙН"
"Monday","14:15","ГУК404(II)","Физика. Часть 2. Основной уровень","АТ-26","Плетнева Елена Давидовна","ГУК"
"Monday","16:00","И258","Физика. Часть 2. Основной уровень","АТ-26","Плетнева Елена Давидовна","ГУК"
'''
    
    is_valid = validator.validate_schedule(csv_string)
    print(f"Расписание из строки {'валидно' if is_valid else 'невалидно'}")

if __name__ == "__main__":
    main() 